# Contributing to SABRE.js

Thank you for your interest in contributing to SABRE.js. This document will help you get started contributing to the project.

## Useful links

-   [Aegisub Documentation](https://yukisubs.files.wordpress.com/2017/05/aegisub-3-2-manual.pdf)
-   [Advanced Substation Alpha Subtitles Unofficial Specification](http://web.archive.org/web/20210328204514/http://www.cccp-project.net/stuff/ass-specs.pdf) (not fully accurate)
-   [libass project](https://github.com/libass/libass)
-   [xy-VSFilter project](https://github.com/Cyberbeing/xy-VSFilter)
-   [WebGL 2.0 Tutorial](https://webgl2fundamentals.org/)
-   [Canvas 2D Tutorial](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial)
-   [Discord Server](https://discord.gg/AnTgtnq)

## Setting up the development environment

In order to work on SABRE.js you will need to install the following utilities:

-   Java Runtime Environment
-   curl
-   nodeJS
-   make

To run a compile of files changed since the last build run the following command:

```sh
make
```

To re-compile all files run the following command:

```sh
make rebuild
```

To run all tests run the following command:

```sh
make test
```

To run a visual feature test run the following command:

```sh
make run
```

### Additional Info

Source files are in `./src/` "header" files are in `./include/`.
The "header" files list the internal shared APIs the different files use to communicate with each other. See [here](https://github.com/google/closure-compiler/wiki/Annotating-JavaScript-for-the-Closure-Compiler) and [here](https://developers.google.com/closure/compiler/docs/externs-and-exports).

#### Folder Structure

* src/ -- Main sourcecode for the project (excluding src/\_\_tests\_\_)
* src/\_\_tests\_\_/ -- Test code for test driven development.
* include/ -- Browser API definitions and internal API definitions for the Closure Compiler (Files in this folder aren't compiled).
* bin/ -- Output directory for production code.
* debugbin/ -- Output directory for debug code.
* scripts/ -- Contains scripts that are run by the makefile.
* tbin/ -- Contains the Closure Compiler and other build tools.
* temp_files/ -- Temporary files.
* test/ -- Directory used when running the debug server.

## Pull Requests

Pull requests are to be submitted through github's interface but must be rebased upon the latest version before submitting. The only merge commit should be the one generated by github's Pull Request interface.

Pull requests must reference the issue they resolve. If you are creating a pull request for an enhancement you must submit an issue that requests the enhancement and then create a pull request that references that issue.

If it is your first pull request in this project don't forget to add your name to CONTRIBUTORS.md, You may chose if you wish to add your discord account next to your name/alias.

## Style Guide/Coding Conventions

Prettier is used to auto-enforce styling, in addition certain styling is necessary for the compiler, if a variable will be made available to other files in the project it must be added to the current file's header file and inside the current file it must use bracket syntax like so:

```js
sabre["objectName"]["variableName"];
```

or if defining something on the global scope:

```js
global["exampleGlobalVariable"];
```

or if definining something on the external facing API:

```js
external["exampleExternalVariable"];
```

Please note: this only applies if the file you are currently in is creating the variable. If it is a variable of another file you do not need to use the bracket syntax.

All classes should be defined using `Object.create(/* Object or superclass */,{/* class definition */})`.
Instantiation of objects from a class may be done via `Object.create(/* class */)` or a helper method that contains such a call that returns the created object after intializing it. Helper methods that create objects should be called using the new keyword. For examples see the existing codebase.

## Looking for a good first contribution?

Check out our issue tracker and look for issues labeled "Good First Issue".

## Questions?

Ask us them on our [Discord Server](https://discord.gg/AnTgtnq).
